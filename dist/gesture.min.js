!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Gesture={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r=function(t){try{return!!t()}catch(t){return!0}},i=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),o=i,u=Function.prototype,a=u.call,s=o&&u.bind.bind(a,a),p=o?s:function(t){return function(){return a.apply(t,arguments)}},l=p({}.isPrototypeOf),c=function(t){return t&&t.Math==Math&&t},f=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof e&&e)||function(){return this}()||e||Function("return this")(),h=Function.prototype,v=h.apply,d=h.call,m="object"==typeof Reflect&&Reflect.apply||(i?d.bind(v):function(){return d.apply(v,arguments)}),g=p,_=g({}.toString),y=g("".slice),w=function(t){return y(_(t),8,-1)},b=w,T=p,P=function(t){if("Function"===b(t))return T(t)},E="object"==typeof document&&document.all,D={all:E,IS_HTMLDDA:void 0===E&&void 0!==E},O=D.all,j=D.IS_HTMLDDA?function(t){return"function"==typeof t||t===O}:function(t){return"function"==typeof t},S={},L=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),M=Function.prototype.call,I=i?M.bind(M):function(){return M.apply(M,arguments)},A={},F={}.propertyIsEnumerable,X=Object.getOwnPropertyDescriptor,x=X&&!F.call({1:2},1);A.f=x?function(t){var e=X(this,t);return!!e&&e.enumerable}:F;var Y,C,k=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},N=r,z=w,R=Object,G=p("".split),H=N((function(){return!R("z").propertyIsEnumerable(0)}))?function(t){return"String"==z(t)?G(t,""):R(t)}:R,V=function(t){return null==t},q=V,U=TypeError,W=function(t){if(q(t))throw U("Can't call method on "+t);return t},B=H,J=W,K=function(t){return B(J(t))},Q=j,Z=D.all,$=D.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:Q(t)||t===Z}:function(t){return"object"==typeof t?null!==t:Q(t)},tt={},et=tt,nt=f,rt=j,it=function(t){return rt(t)?t:void 0},ot=function(t,e){return 2>arguments.length?it(et[t])||it(nt[t]):et[t]&&et[t][e]||nt[t]&&nt[t][e]},ut="undefined"!=typeof navigator&&navigator.userAgent+""||"",at=f.process,st=f.Deno,pt=at&&at.versions||st&&st.version,lt=pt&&pt.v8;lt&&(C=(Y=lt.split("."))[0]>0&&4>Y[0]?1:+(Y[0]+Y[1])),!C&&ut&&((Y=ut.match(/Edge\/(\d+)/))&&74>Y[1]||(Y=ut.match(/Chrome\/(\d+)/))&&(C=+Y[1]));var ct=C,ft=ct,ht=f.String,vt=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!ht(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ft&&41>ft})),dt=vt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,mt=ot,gt=j,_t=l,yt=Object,wt=dt?function(t){return"symbol"==typeof t}:function(t){var e=mt("Symbol");return gt(e)&&_t(e.prototype,yt(t))},bt=String,Tt=function(t){try{return bt(t)}catch(t){return"Object"}},Pt=j,Et=Tt,Dt=TypeError,Ot=function(t){if(Pt(t))return t;throw Dt(Et(t)+" is not a function")},jt=Ot,St=V,Lt=I,Mt=j,It=$,At=TypeError,Ft={exports:{}},Xt=f,xt=Object.defineProperty,Yt="__core-js_shared__",Ct=f[Yt]||function(t,e){try{xt(Xt,t,{value:e,configurable:!0,writable:!0})}catch(n){Xt[t]=e}return e}(Yt,{}),kt=Ct;(Ft.exports=function(t,e){return kt[t]||(kt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.32.0",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Nt=Ft.exports,zt=W,Rt=Object,Gt=function(t){return Rt(zt(t))},Ht=Gt,Vt=p({}.hasOwnProperty),qt=Object.hasOwn||function(t,e){return Vt(Ht(t),e)},Ut=p,Wt=0,Bt=Math.random(),Jt=Ut(1..toString),Kt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Jt(++Wt+Bt,36)},Qt=qt,Zt=Kt,$t=vt,te=dt,ee=f.Symbol,ne=Nt("wks"),re=te?ee.for||ee:ee&&ee.withoutSetter||Zt,ie=function(t){return Qt(ne,t)||(ne[t]=$t&&Qt(ee,t)?ee[t]:re("Symbol."+t)),ne[t]},oe=I,ue=$,ae=wt,se=function(t,e){var n=t[e];return St(n)?void 0:jt(n)},pe=function(t,e){var n,r;if("string"===e&&Mt(n=t.toString)&&!It(r=Lt(n,t)))return r;if(Mt(n=t.valueOf)&&!It(r=Lt(n,t)))return r;if("string"!==e&&Mt(n=t.toString)&&!It(r=Lt(n,t)))return r;throw At("Can't convert object to primitive value")},le=TypeError,ce=ie("toPrimitive"),fe=function(t,e){if(!ue(t)||ae(t))return t;var n,r=se(t,ce);if(r){if(void 0===e&&(e="default"),n=oe(r,t,e),!ue(n)||ae(n))return n;throw le("Can't convert object to primitive value")}return void 0===e&&(e="number"),pe(t,e)},he=wt,ve=function(t){var e=fe(t,"string");return he(e)?e:e+""},de=$,me=f.document,ge=de(me)&&de(me.createElement),_e=function(t){return ge?me.createElement(t):{}},ye=_e,we=!L&&!r((function(){return 7!=Object.defineProperty(ye("div"),"a",{get:function(){return 7}}).a})),be=I,Te=A,Pe=k,Ee=K,De=ve,Oe=qt,je=we,Se=Object.getOwnPropertyDescriptor;S.f=L?Se:function(t,e){if(t=Ee(t),e=De(e),je)try{return Se(t,e)}catch(t){}if(Oe(t,e))return Pe(!be(Te.f,t,e),t[e])};var Le=r,Me=j,Ie=/#|\.prototype\./,Ae=function(t,e){var n=Xe[Fe(t)];return n==Ye||n!=xe&&(Me(e)?Le(e):!!e)},Fe=Ae.normalize=function(t){return(t+"").replace(Ie,".").toLowerCase()},Xe=Ae.data={},xe=Ae.NATIVE="N",Ye=Ae.POLYFILL="P",Ce=Ae,ke=Ot,Ne=i,ze=P(P.bind),Re=function(t,e){return ke(t),void 0===e?t:Ne?ze(t,e):function(){return t.apply(e,arguments)}},Ge={},He=L&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ve=$,qe=String,Ue=TypeError,We=function(t){if(Ve(t))return t;throw Ue(qe(t)+" is not an object")},Be=we,Je=We,Ke=ve,Qe=TypeError,Ze=Object.defineProperty,$e=Object.getOwnPropertyDescriptor,tn="enumerable",en="configurable",nn="writable";Ge.f=L?He?function(t,e,n){if(Je(t),e=Ke(e),Je(n),"function"==typeof t&&"prototype"===e&&"value"in n&&nn in n&&!n[nn]){var r=$e(t,e);r&&r[nn]&&(t[e]=n.value,n={configurable:en in n?n[en]:r[en],enumerable:tn in n?n[tn]:r[tn],writable:!1})}return Ze(t,e,n)}:Ze:function(t,e,n){if(Je(t),e=Ke(e),Je(n),Be)try{return Ze(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Qe("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var rn=Ge,on=k,un=f,an=m,sn=P,pn=j,ln=S.f,cn=Ce,fn=tt,hn=Re,vn=L?function(t,e,n){return rn.f(t,e,on(1,n))}:function(t,e,n){return t[e]=n,t},dn=qt,mn=function(t){var e=function(n,r,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,i)}return an(t,this,arguments)};return e.prototype=t.prototype,e},gn=function(t,e){var n,r,i,o,u,a,s,p,l,c=t.target,f=t.global,h=t.stat,v=t.proto,d=f?un:h?un[c]:(un[c]||{}).prototype,m=f?fn:fn[c]||vn(fn,c,{})[c],g=m.prototype;for(o in e)r=!(n=cn(f?o:c+(h?".":"#")+o,t.forced))&&d&&dn(d,o),a=m[o],r&&(s=t.dontCallGetSet?(l=ln(d,o))&&l.value:d[o]),u=r&&s?s:e[o],r&&typeof a==typeof u||(p=t.bind&&r?hn(u,un):t.wrap&&r?mn(u):v&&pn(u)?sn(u):u,(t.sham||u&&u.sham||a&&a.sham)&&vn(p,"sham",!0),vn(m,o,p),v&&(dn(fn,i=c+"Prototype")||vn(fn,i,{}),vn(fn[i],o,u),t.real&&g&&(n||!g[o])&&vn(g,o,u)))},_n=Math.ceil,yn=Math.floor,wn=Math.trunc||function(t){var e=+t;return(e>0?yn:_n)(e)},bn=function(t){var e=+t;return e!=e||0===e?0:wn(e)},Tn=bn,Pn=Math.max,En=Math.min,Dn=function(t,e){var n=Tn(t);return 0>n?Pn(n+e,0):En(n,e)},On=bn,jn=Math.min,Sn=function(t){return t>0?jn(On(t),9007199254740991):0},Ln=function(t){return Sn(t.length)},Mn=w,In=Array.isArray||function(t){return"Array"==Mn(t)},An=In,Fn=TypeError,Xn=Object.getOwnPropertyDescriptor,xn=L&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(An(t)&&!Xn(t,"length").writable)throw Fn("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Yn=TypeError,Cn={};Cn[ie("toStringTag")]="z";var kn=Cn+""=="[object z]",Nn=j,zn=w,Rn=ie("toStringTag"),Gn=Object,Hn="Arguments"==zn(function(){return arguments}()),Vn=kn?zn:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Gn(t),Rn))?n:Hn?zn(e):"Object"==(r=zn(e))&&Nn(e.callee)?"Arguments":r},qn=j,Un=Ct,Wn=p(Function.toString);qn(Un.inspectSource)||(Un.inspectSource=function(t){return Wn(t)});var Bn=p,Jn=r,Kn=j,Qn=Vn,Zn=Un.inspectSource,$n=function(){},tr=[],er=ot("Reflect","construct"),nr=/^\s*(?:class|function)\b/,rr=Bn(nr.exec),ir=!nr.exec($n),or=function(t){if(!Kn(t))return!1;try{return er($n,tr,t),!0}catch(t){return!1}},ur=function(t){if(!Kn(t))return!1;switch(Qn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ir||!!rr(nr,Zn(t))}catch(t){return!0}};ur.sham=!0;var ar=!er||Jn((function(){var t;return or(or.call)||!or(Object)||!or((function(){t=!0}))||t}))?ur:or,sr=In,pr=ar,lr=$,cr=ie("species"),fr=Array,hr=function(t){var e;return sr(t)&&(pr(e=t.constructor)&&(e===fr||sr(e.prototype))||lr(e)&&null===(e=e[cr]))&&(e=void 0),void 0===e?fr:e},vr=function(t,e){return new(hr(t))(0===e?0:e)},dr=ve,mr=Ge,gr=k,_r=Tt,yr=TypeError,wr=r,br=ct,Tr=ie("species"),Pr=function(t){return br>=51||!wr((function(){var e=[];return(e.constructor={})[Tr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Er=gn,Dr=Gt,Or=Dn,jr=bn,Sr=Ln,Lr=xn,Mr=function(t){if(t>9007199254740991)throw Yn("Maximum allowed index exceeded");return t},Ir=vr,Ar=function(t,e,n){var r=dr(e);r in t?mr.f(t,r,gr(0,n)):t[r]=n},Fr=function(t,e){if(!delete t[e])throw yr("Cannot delete property "+_r(e)+" of "+_r(t))},Xr=Pr("splice"),xr=Math.max,Yr=Math.min;Er({target:"Array",proto:!0,forced:!Xr},{splice:function(t,e){var n,r,i,o,u,a,s=Dr(this),p=Sr(s),l=Or(t,p),c=arguments.length;for(0===c?n=r=0:1===c?(n=0,r=p-l):(n=c-2,r=Yr(xr(jr(e),0),p-l)),Mr(p+n-r),i=Ir(s,r),o=0;r>o;o++)(u=l+o)in s&&Ar(i,o,s[u]);if(i.length=r,r>n){for(o=l;p-r>o;o++)a=o+n,(u=o+r)in s?s[a]=s[u]:Fr(s,a);for(o=p;o>p-r+n;o--)Fr(s,o-1)}else if(n>r)for(o=p-r;o>l;o--)a=o+n-1,(u=o+r-1)in s?s[a]=s[u]:Fr(s,a);for(o=0;n>o;o++)s[o+l]=arguments[o+2];return Lr(s,p-r+n),i}});var Cr=tt,kr=function(t){return Cr[t+"Prototype"]},Nr=kr("Array").splice,zr=l,Rr=Nr,Gr=Array.prototype,Hr=n((function(t){var e=t.splice;return t===Gr||zr(Gr,t)&&e===Gr.splice?Rr:e})),Vr=function(){function t(){this.events={},this.events={}}var e=t.prototype;return e.one=function(t,e,n){var r=this,i="function"==typeof e?function(){for(var o=arguments.length,u=Array(o),a=0;o>a;a++)u[a]=arguments[a];e.apply(null,u),r.off(t,i,n)}:e;this.on(t,i,n)},e.on=function(t,e,n){var r=this.events[t]||{pool:[],single:-1};if("function"==typeof e)if(n)-1===r.single?r.single=r.pool.push(e)-1:r.pool[r.single]=e;else{for(var i=!0,o=0,u=r.pool.length;u>o;o++)if(r.pool[o]===e&&o!==r.single){i=!1;break}i&&r.pool.push(e)}else if(n&&-1!==r.single){var a;Hr(a=r.pool).call(a,r.single,1),r.single=-1}this.events[t]=r},e.off=function(t,e,n){if(void 0===t)this.events={};else if(void 0===e)delete this.events[t];else if(n){var r,i=this.events[t];if(i&&-1!==i.single)Hr(r=i.pool).call(r,i.single,1),i.single=-1}else{var o=this.events[t];if(o)for(var u=o.pool.length-1;u>=0;u--)if(o.pool[u]===e&&u!==o.single){var a;Hr(a=o.pool).call(a,u,1);break}}},e.emit=function(t,e){var n=this.events[t];if(n)for(var r=0,i=n.pool.length;i>r;r++){var o=n.pool[r];if("function"==typeof o)if(!1===o.call(null,e,t))break}},t}();function qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ur={},Wr=K,Br=Dn,Jr=Ln,Kr=function(t){return function(e,n,r){var i,o=Wr(e),u=Jr(o),a=Br(r,u);if(t&&n!=n){for(;u>a;)if((i=o[a++])!=i)return!0}else for(;u>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},Qr={includes:Kr(!0),indexOf:Kr(!1)},Zr={},$r=qt,ti=K,ei=Qr.indexOf,ni=Zr,ri=p([].push),ii=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],oi=function(t,e){var n,r=ti(t),i=0,o=[];for(n in r)!$r(ni,n)&&$r(r,n)&&ri(o,n);for(;e.length>i;)$r(r,n=e[i++])&&(~ei(o,n)||ri(o,n));return o},ui=ii,ai=Ge,si=We,pi=K,li=Object.keys||function(t){return oi(t,ui)};Ur.f=L&&!He?Object.defineProperties:function(t,e){si(t);for(var n,r=pi(e),i=li(e),o=i.length,u=0;o>u;)ai.f(t,n=i[u++],r[n]);return t};var ci,fi=ot("document","documentElement"),hi=Kt,vi=Nt("keys"),di=We,mi=Ur,gi=ii,_i=Zr,yi=fi,wi=_e,bi="prototype",Ti="script",Pi=function(t){return vi[t]||(vi[t]=hi(t))}("IE_PROTO"),Ei=function(){},Di=function(t){return"<"+Ti+">"+t+"</"+Ti+">"},Oi=function(t){t.write(Di("")),t.close();var e=t.parentWindow.Object;return t=null,e},ji=function(){try{ci=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;ji="undefined"!=typeof document?document.domain&&ci?Oi(ci):(e=wi("iframe"),n="java"+Ti+":",e.style.display="none",yi.appendChild(e),e.src=n+"",(t=e.contentWindow.document).open(),t.write(Di("document.F=Object")),t.close(),t.F):Oi(ci);for(var r=gi.length;r--;)delete ji[bi][gi[r]];return ji()};_i[Pi]=!0,gn({target:"Object",stat:!0,sham:!L},{create:Object.create||function(t,e){var n;return null!==t?(Ei[bi]=di(t),n=new Ei,Ei[bi]=null,n[Pi]=t):n=ji(),void 0===e?n:mi.f(n,e)}});var Si=tt.Object,Li=n((function(t,e){return Si.create(t,e)})),Mi=p,Ii=Ot,Ai=j,Fi=String,Xi=TypeError,xi=function(t,e,n){try{return Mi(Ii(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}},Yi=We,Ci=function(t){if("object"==typeof t||Ai(t))return t;throw Xi("Can't set "+Fi(t)+" as a prototype")},ki=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=xi(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Yi(n),Ci(r),e?t(n,r):n.__proto__=r,n}}():void 0);gn({target:"Object",stat:!0},{setPrototypeOf:ki});var Ni=n(tt.Object.setPrototypeOf),zi=p([].slice),Ri=p,Gi=Ot,Hi=$,Vi=qt,qi=zi,Ui=i,Wi=Function,Bi=Ri([].concat),Ji=Ri([].join),Ki={},Qi=Ui?Wi.bind:function(t){var e=Gi(this),n=e.prototype,r=qi(arguments,1),i=function(){var n=Bi(r,qi(arguments));return this instanceof i?function(t,e,n){if(!Vi(Ki,e)){for(var r=[],i=0;e>i;i++)r[i]="a["+i+"]";Ki[e]=Wi("C,a","return new C("+Ji(r,",")+")")}return Ki[e](t,n)}(e,n.length,n):e.apply(t,n)};return Hi(n)&&(i.prototype=n),i};gn({target:"Function",proto:!0,forced:Function.bind!==Qi},{bind:Qi});var Zi=kr("Function").bind,$i=l,to=Zi,eo=Function.prototype,no=n((function(t){var e=t.bind;return t===eo||$i(eo,t)&&e===eo.bind?to:e}));function ro(t,e){var n;return ro=Ni?no(n=Ni).call(n):function(t,e){return t.__proto__=e,t},ro(t,e)}var io=Re,oo=H,uo=Gt,ao=Ln,so=vr,po=p([].push),lo=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,u=7==t,a=5==t||o;return function(s,p,l,c){for(var f,h,v=uo(s),d=oo(v),m=io(p,l),g=ao(d),_=0,y=c||so,w=e?y(s,g):n||u?y(s,0):void 0;g>_;_++)if((a||_ in d)&&(h=m(f=d[_],_,v),t))if(e)w[_]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return _;case 2:po(w,f)}else switch(t){case 4:return!1;case 7:po(w,f)}return o?-1:r||i?i:w}},co={forEach:lo(0),map:lo(1),filter:lo(2),some:lo(3),every:lo(4),find:lo(5),findIndex:lo(6),filterReject:lo(7)}.filter;gn({target:"Array",proto:!0,forced:!Pr("filter")},{filter:function(t){return co(this,t,arguments.length>1?arguments[1]:void 0)}});var fo=kr("Array").filter,ho=l,vo=fo,mo=Array.prototype,go=n((function(t){var e=t.filter;return t===mo||ho(mo,t)&&e===mo.filter?vo:e})),_o=function(t,e){for(var n=t;n&&n!==e;)n=n.parentNode;return!!n};function yo(t,e,n){return"number"!=typeof t||n>t?e:t}function wo(t){return!!t&&(navigator.maxTouchPoints||"ontouchstart"in t)}function bo(t,e){if(void 0===e&&(e=!1),t instanceof TouchEvent){if(e){var n=go(Array.prototype).call(t.touches,(function(e){return _o(e.target,t.currentTarget)}));return{points:n,isFirst:t.changedTouches.length===n.length}}return{points:t.changedTouches}}return{points:[{pageX:t.pageX,pageY:t.pageY,identifier:-1}],isFirst:e}}function To(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return"number"==typeof n&&"number"==typeof i&&"number"==typeof r&&"number"==typeof o?Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)):0}function Po(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return"number"==typeof n&&"number"==typeof i&&"number"==typeof r&&"number"==typeof o?180*Math.atan2(o-r,i-n)/Math.PI:0}function Eo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],u="number"==typeof n&&"number"==typeof r,a="number"==typeof i&&"number"==typeof o;return u||a?u&&!a?[n,r]:!u&&a?[i,o]:[(n+i)/2,(r+o)/2]:[0,0]}function Do(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];if("number"==typeof n&&"number"==typeof i&&"number"==typeof r&&"number"==typeof o){var u=n-i,a=r-o;if(u!==a)return Math.abs(a)>Math.abs(u)?r-o>0?"Up":"Down":n-i>0?"Left":"Right"}return"None"}function Oo(t){var e=this,n=bo(t,!0),r=n.points,i=n.isFirst;if(r){t.preventDefault(),t.stopImmediatePropagation();var o={currentTarget:this.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}};i?(this._wheelTimerEnd&&(window.clearTimeout(this._wheelTimerEnd.timer),this._wheelTimerEnd.wheelEnd(),this._wheelTimerEnd=null),this._pointer0=null,this._pointer1=null):(this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1));for(var u=0,a=r.length;a>u;++u){var s=r[u],p=[s.pageX,s.pageY],l={start:p,previous:p,current:p,identifier:s.identifier,changed:!0};this._pointer0?this._pointer1||this._pointer0.identifier===s.identifier||(this._pointer1=l):this._pointer0=l}this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._swipePoints=null,this._rotateAngle=0,this._longTapTimer&&(window.clearTimeout(this._longTapTimer),this._longTapTimer=null);var c=this._pointer0,f=this._pointer1;if(f&&c)this._firstPointer=null,o.pointers=[c,f],o.getPoint=function(){return Eo(c.current,f.current)},this.emit("gestureStart",o);else{if(!c)return;o.pointers=[c],o.getPoint=function(){return c.current},this._preventTap=!1,this._longTapTimer=window.setTimeout((function(){e._preventTap=!0,e._preventSingleTap=!0,e._preventDoubleTap=!0,e._longTapTimer=null,e._firstPointer=null,o.waitTime=e.longTapInterval,e.emit("longTap",o)}),this.longTapInterval);var h=this._firstPointer,v=this._singleTapTimer;v&&h&&To(h.current,c.current)<this.doubleTapDistance?(window.clearTimeout(v),this._singleTapTimer=null,this._preventSingleTap=!0,this._preventDoubleTap=!1,o.getPoint=function(){return h.current}):(this._firstPointer=c,this._preventSingleTap=!1,this._preventDoubleTap=!0)}this.emit("pointerStart",o)}}function jo(t){var e=bo(t).points;if(e){t.preventDefault(),t.stopImmediatePropagation();var n={currentTarget:this.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}};this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);for(var r=0,i=e.length;i>r;++r){var o=e[r],u=[o.pageX,o.pageY];this._pointer0&&this._pointer0.identifier===o.identifier?(this._pointer0.changed=!0,this._pointer0.previous=this._pointer0.current,this._pointer0.current=u):this._pointer1&&this._pointer1.identifier===o.identifier&&(this._pointer1.changed=!0,this._pointer1.previous=this._pointer1.current,this._pointer1.current=u)}var a=this._pointer0,s=this._pointer1;if(a&&To(a.start,a.current)>this.touchMoveDistance||s&&To(s.start,s.current)>this.touchMoveDistance){if(this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._firstPointer=null,this._longTapTimer&&(window.clearTimeout(this._longTapTimer),this._longTapTimer=null),s&&a){n.pointers=[a,s];var p=a.start,l=a.previous,c=a.current,f=s.start,h=s.previous,v=s.current,d=Eo(c,v),m=Eo(l,h),g=Eo(p,f);n.getPoint=function(t){return"start"===t?g:"previous"===t?m:d},n.direction=Do(m,d),n.moveDirection=Do(g,d),n.deltaX=d[0]-m[0],n.moveX=d[0]-g[0],n.deltaY=d[1]-m[1],n.moveY=d[1]-g[1];var _=To(c,v),y=To(l,h),w=To(p,f);w>0&&_>0&&y>0&&(n.scale=_/y,n.moveScale=_/w);var b=Po(c,v)-Po(l,h);-180>b?b+=360:b>180&&(b-=360),n.angle=b,this._rotateAngle+=b,n.moveAngle=this._rotateAngle,this.emit("rotate",n),w>0&&_>0&&y>0&&this.emit("scale",n),this.emit("multiPan",n),this.emit("gestureMove",n)}else{if(!a)return;n.pointers=[a];var T=a.start,P=a.previous,E=a.current;n.getPoint=function(t){return"start"===t?T:"previous"===t?P:E},n.direction=Do(P,E),n.moveDirection=Do(T,E),n.deltaX=E[0]-P[0],n.moveX=E[0]-T[0],n.deltaY=E[1]-P[1],n.moveY=E[1]-T[1];var D=Date.now(),O=this._swipePoints||[[],[]];D-((O[1][0]?O[1][0].timestamp:0)||0)>this.swipeDuration&&(O[0]=O[1],O[1]=[]),O[1].push({point:E,timestamp:D}),this._swipePoints=O,this.emit("pan",n)}this.emit("pointerMove",n)}}}function So(t){var e=this,n=bo(t).points;if(n){t.stopImmediatePropagation();var r,i,o={currentTarget:this.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}},u=null,a=null;this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);for(var s=0,p=n.length;p>s;++s){var l=n[s];this._pointer0&&this._pointer0.identifier===l.identifier?(this._pointer0.changed=!0,u=this._pointer0,this._pointer0=null):this._pointer1&&this._pointer1.identifier===l.identifier&&(this._pointer1.changed=!0,a=this._pointer1,this._pointer1=null)}if(this._pointer1&&!this._pointer0&&(this._pointer0=this._pointer1,this._pointer1=null,a=u,u=null),this._longTapTimer&&(window.clearTimeout(this._longTapTimer),this._longTapTimer=null),this._pointer0){o.pointers=[this._pointer0],this._pointer1?o.pointers.push(this._pointer1):a&&(o.leavePointers=[a]);var c=Eo(this._pointer0.start,this._pointer1?this._pointer1.start:a?a.start:[]),f=Eo(this._pointer0.previous,this._pointer1?this._pointer1.previous:a?a.previous:[]),h=Eo(this._pointer0.current,this._pointer1?this._pointer1.current:a?a.current:[]);o.getPoint=function(t){return"start"===t?c:"previous"===t?f:h},this.emit("gestureEnd",o)}else if(u){o.leavePointers=[u],a&&o.leavePointers.push(a);var v=a?Eo(u.start,a.start):u.start,d=a?Eo(u.previous,a.previous):u.previous,m=a?Eo(u.current,a.current):u.current;if(o.getPoint=function(t){return"start"===t?v:"previous"===t?d:m},this._preventTap||this.emit("tap",o),this._preventSingleTap||(this._singleTapTimer=window.setTimeout((function(){e._singleTapTimer=null,o.delayTime=e.doubleTapInterval,e.emit("singleTap",o)}),this.doubleTapInterval)),!this._preventDoubleTap){var g=this._firstPointer;g&&(o.getPoint=function(){return g.current}),o.intervalTime=this.doubleTapInterval,this.emit("doubleTap",o)}if(this._swipePoints){var _=this._swipePoints,y=_[0],w=_[1],b=w[w.length-1];if(Date.now()-b.timestamp<=this.raiseDuration){for(var T=w[0],P=y.length-1;P>=0&&b.timestamp-y[P].timestamp<=this.swipeDuration;P--)T=y[P];var E=(r=b.timestamp-T.timestamp,"number"!=typeof(i=To(T.point,b.point))||0===i||"number"!=typeof r||0===r?0:i/r);if(E>this.swipeVelocity){var D=Po(T.point,b.point);o.direction=Do(T.point,b.point),o.angle=D,o.velocity=E,o.swipeComputed=function(t,e){void 0===e&&(e=E);var n=0,r=0,i=0;t>1?(r=e/(n=t),i=e*n/2):t>0&&(n=e/(r=t),i=e*e/(2*r));var o=function(t,e){if("number"!=typeof t||"number"!=typeof e)return[0,0];var n=e*Math.PI/180;return[t*Math.cos(n),t*Math.sin(n)]}(i,D);return{duration:n,stretchX:o[0],stretchY:o[1],deceleration:r}},this.emit("swipe",o)}}}}this.emit("pointerEnd",o)}}function Lo(t){t.stopImmediatePropagation(),this.emit("pointerCancel",{currentTarget:this.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}}),So.call(this,t)}function Mo(){this._singleTapTimer&&(window.clearTimeout(this._singleTapTimer),this._singleTapTimer=null),this._longTapTimer&&(window.clearTimeout(this._longTapTimer),this._longTapTimer=null),this._wheelTimerEnd&&(window.clearTimeout(this._wheelTimerEnd.timer),this._wheelTimerEnd=null),this._firstPointer=null,this._pointer0=null,this._pointer1=null,this._preventTap=!0,this._swipePoints=null,this._preventSingleTap=!0,this._preventDoubleTap=!0}function Io(t){var e=this;function n(){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",u),window.removeEventListener("blur",r),window.removeEventListener("dragstart",i),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",i)}function r(t){t.preventDefault(),t.stopImmediatePropagation(),n()}function i(t){t.preventDefault(),t.stopImmediatePropagation()}function o(n){if(0===t.button)jo.call(e,n);else{n.preventDefault(),n.stopImmediatePropagation();var r={currentTarget:e.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}},i=[n.pageX,n.pageY];if(e._pointer0){e._pointer0.previous=e._pointer0.current,e._pointer0.current=i,r.pointers=[e._pointer0];var o=e._pointer0,u=o.start,a=o.previous,s=o.current;r.getPoint=function(t){return"start"===t?u:"previous"===t?a:s},r.direction=Do(a,s),r.moveDirection=Do(u,s),r.deltaX=s[0]-a[0],r.moveX=s[0]-u[0],r.deltaY=s[1]-a[1],r.moveY=s[1]-u[1],r.angle=r.deltaX/4,r.moveAngle=r.moveX/4,e.emit("rotate",r)}}}function u(r){if(n(),0===t.button)So.call(e,r);else{r.stopImmediatePropagation();var i={currentTarget:e.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}},o=[r.pageX,r.pageY];if(e._pointer0){var u=e._pointer0;e._pointer0=null,u.previous=u.current,u.current=o,i.leavePointers=[u];var a=u.start,s=u.previous,p=u.current;i.getPoint=function(t){return"start"===t?a:"previous"===t?s:p}}i.angle=NaN,e.emit("rotate",i)}}if(window.addEventListener("mousemove",o),window.addEventListener("mouseup",u),window.addEventListener("blur",r),window.addEventListener("dragstart",i,{capture:!0,passive:!1}),"onselectstart"in window.document.documentElement&&window.addEventListener("selectstart",i,{capture:!0,passive:!1}),0===t.button)Oo.call(e,t);else{t.preventDefault(),t.stopImmediatePropagation(),e._wheelTimerEnd&&(window.clearTimeout(e._wheelTimerEnd.timer),e._wheelTimerEnd.wheelEnd(),e._wheelTimerEnd=null);var a=[t.pageX,t.pageY];e._pointer0={start:a,previous:a,current:a,identifier:-1,changed:!0}}}function Ao(t){var e=this;t.preventDefault(),t.stopImmediatePropagation();var n={currentTarget:this.element,sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:function(){return[0,0]}},r=[t.pageX,t.pageY];this._wheelTimerEnd?(this._pointer0&&(this._pointer0.previous=this._pointer0.current,this._pointer0.current=r),window.clearTimeout(this._wheelTimerEnd.timer)):this._pointer0={start:r,previous:r,current:r,identifier:-1,changed:!0};var i=function(){e._pointer0=null,e._wheelTimerEnd=null,n.timestamp=Date.now(),n.scale=NaN,e.emit("scale",n)};if(this._wheelTimerEnd={wheelEnd:i,timer:window.setTimeout(i,this.wheelDelay),scale:this._wheelTimerEnd?this._wheelTimerEnd.scale:1},this._pointer0){n.pointers=[this._pointer0];var o=this._pointer0,u=o.start,a=o.previous,s=o.current;n.getPoint=function(t){return"start"===t?u:"previous"===t?a:s};var p=Math.pow(2,-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002));this._wheelTimerEnd.scale*=p,n.moveScale=this._wheelTimerEnd.scale,n.scale=p,this.emit("scale",n)}}var Fo=function(t){var e,n;function r(e,n){var r,i;if((r=t.call(this)||this)._rotateAngle=0,r._singleTapTimer=null,r._longTapTimer=null,r._wheelTimerEnd=null,r._preventTap=!0,r._swipePoints=null,r._preventSingleTap=!0,r._preventDoubleTap=!0,r._firstPointer=null,r._pointer0=null,r._pointer1=null,r._destory=null,!((i="string"==typeof e?document.querySelector(e):e)&&i instanceof HTMLElement))throw Error("Please pass in a valid element...");r.element=i;var o=n||{},u=o.longTapInterval,a=o.doubleTapInterval,s=o.doubleTapDistance,p=o.touchMoveDistance,l=o.swipeVelocity,c=o.swipeDuration,f=o.raiseDuration;r.wheelDelay=yo(o.wheelDelay,350,1),r.longTapInterval=yo(u,750,1),r.doubleTapInterval=yo(a,250,1),r.doubleTapDistance=yo(s,30,1),r.touchMoveDistance=yo(p,3,0),r.swipeVelocity=yo(l,.3,0),r.swipeDuration=yo(c,100,1),r.raiseDuration=yo(f,100,1);var h=Mo.bind(qr(r));if(wo(r.element)){var v=Oo.bind(qr(r)),d=jo.bind(qr(r)),m=So.bind(qr(r)),g=Lo.bind(qr(r));r.element.addEventListener("touchstart",v,!1),r.element.addEventListener("touchmove",d,!1),r.element.addEventListener("touchend",m,!1),r.element.addEventListener("touchcancel",g,!1),window.addEventListener("scroll",h),r._destory=function(){r.element.removeEventListener("touchstart",v),r.element.removeEventListener("touchmove",d),r.element.removeEventListener("touchend",m),r.element.removeEventListener("touchcancel",g),window.removeEventListener("scroll",h)}}else{var _=Io.bind(qr(r));r.element.addEventListener("mousedown",_,!1);var y=Ao.bind(qr(r));r.element.addEventListener("wheel",y,!1),window.addEventListener("scroll",h),r._destory=function(){r.element.removeEventListener("mousedown",_),r.element.removeEventListener("wheel",y),window.removeEventListener("scroll",h)}}return r}(e=r).prototype=Li((n=t).prototype),e.prototype.constructor=e,ro(e,n);var i=r.prototype;return i.isTouch=function(){return wo(this.element)},i.destory=function(){t.prototype.off.call(this),Mo.apply(this),this._destory&&(this._destory(),this._destory=null)},r}(Vr);t.EventTarget=Vr,t.default=Fo,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=gesture.min.js.map
